<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒãƒ¼ãƒˆä¸€è¦§</title>
</head>
<body style="margin: 0; padding: 0;">
    <div style="max-width: 90%; margin: 0 auto; padding: 0 32px; box-sizing: border-box;">
        <h1>ãƒãƒ¼ãƒˆä¸€è¦§</h1>
        <!-- æ¤œç´¢ãƒ•ã‚©ãƒ¼ãƒ  -->
        <form method="post" style="display: flex; align-items: center; width: 100%; box-sizing: border-box; position: relative;">
            <!-- æ¤œç´¢å…¥åŠ›æ¬„ -->
            <input type="text" id="searchword" name="searchword" placeholder="ãƒãƒ¼ãƒˆã‚’æ¤œç´¢ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒ»å†…å®¹ï¼‰" value="{{ searchword }}";
                style="width: 30%; min-width: 150px; max-width: 50%; font-size: 1.2em; padding-right: 2em;"
                oninput="document.getElementById('clear-btn').style.display = this.value ? 'block' : 'none';">
            <!-- å…¥åŠ›ã‚¯ãƒªã‚¢ãƒœã‚¿ãƒ³ -->
            <button type="button" id="clear-btn" onclick="document.getElementById('searchword').value=''; this.style.display='none';"
                style="display: none; position: absolute; right: 68%; top: 50%; transform: translateY(-50%); border: none; background: transparent; font-size: 1.2em; cursor: pointer;">âœ•</button>
            <!-- æ¤œç´¢ãƒœã‚¿ãƒ³ -->
            <button type="submit" style="font-size: 1.0em; margin-left: 1%;">ğŸ”</button>
            <!-- ä¸¦ã³é †ãƒ—ãƒ«ãƒ€ã‚¦ãƒ³ -->
            <select name="order" style="margin-left: 2%; font-size: 1.0em;">
                {% for order in orders %}
                 <option value="{{ order }}">{{ order }}</option>
                {% endfor %}
            </select>
            <!-- å³å¯„ã›ç”¨ã‚¹ãƒšãƒ¼ã‚¹ -->
            <span style="flex: 1;"></span>
            <!-- æ–°è¦ãƒãƒ¼ãƒˆä½œæˆãƒœã‚¿ãƒ³ -->
            <button type="button" style="font-size: 1.0em; margin-right: 10%;" onclick="location.href='/note'">ï¼‹ æ–°è¦ãƒãƒ¼ãƒˆ</button>
        </form>
        <!-- ãƒãƒ¼ãƒˆä»¶æ•°è¡¨ç¤º -->
        <p style="margin: 8px 0 0 0;">
            {{ len }}ä»¶ã®ãƒãƒ¼ãƒˆ
        </p>
        {% if notes %}
        <!-- ãƒãƒ¼ãƒˆä¸€è¦§ãƒ†ãƒ¼ãƒ–ãƒ« -->
        <table style="border: none; margin-top: 24px; width: 100%; border-collapse: collapse;" cellpadding="8" cellspacing="0">
            <thead>
                <tr>
                    <!-- ã‚¿ã‚¤ãƒˆãƒ«åˆ— -->
                    <th style="text-align: left;">ã‚¿ã‚¤ãƒˆãƒ«</th>
                    <!-- æœ€çµ‚æ›´æ–°æ—¥åˆ— -->
                    <th style="text-align: left;">æœ€çµ‚æ›´æ–°æ—¥</th>
                    <!-- æ“ä½œåˆ— -->
                    <th></th>
                </tr>
            </thead>
            <today>
        {% for note in notes: %}
            {% set column = note %}
            <tr>
                {% for item in column: %}
                    <td style="text-align: left;">{{ item }}</td>
                {% endfor %}
            </tr>
        {% endfor %}
            </today>
        </table>
        {% endif %}
        <!-- ãƒãƒ¼ãƒˆãŒãªã„å ´åˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
        {% if not notes %}
            <p style="text-align: center; color: #999; margin-top: 24px;">ãƒãƒ¼ãƒˆãŒã‚ã‚Šã¾ã›ã‚“</p>
        {% endif %}
    </div>

    <!-- å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="custom-modal" style="display:none; position:fixed; left:0; top:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:1000; align-items:center; justify-content:center;">
        <div style="background:#fff; padding:32px 24px; border-radius:8px; box-shadow:0 2px 8px rgba(0,0,0,0.2); min-width:260px; text-align:center;">
            <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚¿ã‚¤ãƒˆãƒ« -->
            <p style="margin-bottom: 24px; text-align: left;">ãƒãƒ¼ãƒˆã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ</p>
            <!-- ãƒ¢ãƒ¼ãƒ€ãƒ«èª¬æ˜ -->
            <p style="margin-bottom: 32px; color:#666;">ã€Œ{{none}}ã€ã‚’å‰Šé™¤ã—ã¾ã™ã€‚ã“ã®æ“ä½œã¯å…ƒã«æˆ»ã›ã¾ã›ã‚“ã€‚</p>
            <!-- ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³ -->
            <button onclick="closeModal(false)" style="padding:8px 24px; background:#ccc; color:#333; border:none; border-radius:4px; font-size:1em; cursor:pointer;">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <!-- å‰Šé™¤ãƒœã‚¿ãƒ³ -->
            <button onclick="closeModal(true)" style="margin-right:16px; padding:8px 24px; background:#d32f2f; color:#fff; border:none; border-radius:4px; font-size:1em; cursor:pointer;">å‰Šé™¤</button>
        </div>
    </div>

    <!-- ãƒˆãƒ¼ã‚¹ãƒˆé€šçŸ¥ -->
    <div id="toast" style="display:none; position:fixed; bottom:40px; left:50%; transform:translateX(-50%); background:#323232; color:#fff; padding:16px 32px; border-radius:8px; font-size:1.1em; z-index:2000; box-shadow:0 2px 8px rgba(0,0,0,0.2);">
        å‰Šé™¤ã—ã¾ã—ãŸ
    </div>

    <script>

    function clearbutton(){
        document.getElementById('clear-btn').style.display = this.value ? 'block' : 'none';
    }


    
    // å‰Šé™¤æ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ä¿æŒ
    let deleteCallback = null;

    // å‰Šé™¤ç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
    function confirmDeleteCustom(callback) {
        document.getElementById('custom-modal').style.display = 'flex';
        deleteCallback = callback;
    }

    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹ãƒ»å‰Šé™¤å‡¦ç†å®Ÿè¡Œ
    function closeModal(doDelete) {
        document.getElementById('custom-modal').style.display = 'none';
        if (doDelete && typeof deleteCallback === 'function') {
            deleteCallback();
            showToast('å‰Šé™¤ã—ã¾ã—ãŸ');
        }
        deleteCallback = null;
    }

    // ãƒˆãƒ¼ã‚¹ãƒˆè¡¨ç¤ºé–¢æ•°
    function showToast(message) {
        const toast = document.getElementById('toast');
        toast.textContent = message;
        toast.style.display = 'block';
        setTimeout(() => {
            toast.style.display = 'none';
        }, 2000);
    }
    clearbutton();
    </script>
</body>
</html>